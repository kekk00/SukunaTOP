import fs from 'fs';
import path from 'path';

export const command = ['svuota'];

export async function run(sock, message, args) {
    const folder = './Sessione';
    const files = fs.readdirSync(folder).filter(f => f !== 'creds.json');
    files.forEach(f => fs.unlinkSync(path.join(folder,f)));

    const text = `🗑️ Ho eliminato ${files.length} file dalla sessione!`;

    const buttons = [
        { buttonId: '!topgruppi', buttonText: { displayText: '👥️ Top Gruppi' }, type: 1 },
        { buttonId: '!topusers', buttonText: { displayText: '👤 Top User' }, type: 1 },
        { buttonId: '!comandi', buttonText: { displayText: '♻️ Lista Comandi' }, type: 1 }
    ];

    await sock.sendMessage(message.key.remoteJid, {
        text,
        buttons,
        headerType: 1
    }, { quoted: message });
}